# Autonomous Driving in Unstructured Environments: How Far Have We Come?

#### 摘要

非结构化环境(如农村地区和崎岖的地形)构成了在结构化城市地区不常见的独特障碍。尽管存在这些困难，但非结构化户外环境中的自动驾驶对于农业、采矿和军事行动中的应用至关重要。

该综述调查回顾了250多篇关于非结构化户外环境下自动驾驶的论文，涵盖了线的测绘、姿态估计、环境感知、路径规划、端到端自动驾驶、数据集和相关挑战。

在:https://github.com/chaytonmin/Survey-Autonomous-Driving-in-Unstructured-Environments 维护一个包含最新文献和开源项目的活动存储库

#### 非结构化环境有六个固有特征
1. 环境类型多样性
2. 要素种类繁多
3. 语义类别的模糊性
4. 无序的场景结构
5. 道路条件的复杂性
6. 卫星信号的脆弱性

#### 传统模块化自动驾驶系统的工作流程

1. 在离线准备阶段，系统首先使用离线映射模块创建目标环境的高精度先验地图
2. 根据车辆的实际自主任务需求，全局路径规划模块生成全局路径，为自动驾驶提供定向引导
3. 一旦在线驾驶阶段开始，系统就会接收车载传感器采集的实时数据。
4. 姿态估计模块确定车辆的瞬时位置和方向
5. 环境感知模块则分析周围环境的实时情况
6. 局部路径规划模块生成车辆应该遵循的局部行驶路径
7. 运动控制模块将这些路径转换为具体的控制命令
![传统模块的自动驾驶流程](/论文/综述/img/传统模块的自动驾驶流程.png)

#### 各个模块

1. 离线测绘
- 作用：存储静态数据以支持姿态估计和规划
- 制图过程通常利用SLAM技术以及各种传感器类型，其中激光雷达方法被证明特别有效
- 由于，缺少标志等关键元素也会大大降低地图的实用价值
- 主要办法：基于激光雷达的方法、基于视觉的方法、基于毫米波的方法、以及多传感器融合的方法
- 主要介绍：基于激光雷达的方法、基于融合的方法

2. 姿态估计
- 主要方法：基于GNSS的姿态估计方法、基于地图匹配的姿态估计方法和基于里程计的姿态估计方法
- 主要介绍: 包括基于匹配的方法[高清地图、轻量级地图、位置识别和重新定位]和基于里程计的方法


1. 环境感知
- 遍历性估计算法：包括基于激光雷达、基于视觉和基于融合的方法
- 语义分割方法

1. 路径规划

- 全局和局部路径规划算法: :基于搜索的、基于样本的、基于优化的、基于人工势场的、基于动态窗口方法的、受生物启发的和数据驱动的方法

5. 车辆运动控制

- 主要办法：比例积分导数(PID)控制、比例积分导数(PID)控制、滑膜控制、模型预测控制(MPC)

#### 各个模块的挑战

1. 传感器   
- 视觉传感器的准确捕获非结构化环境的能力有限
- 雷达固有地遭受数据稀疏性
2. 离线地图
- 无法预收取数据
- 实用性大大降低
3. 全球路径规划
- 仅依靠卫星图像作为独家数据源
4. 姿态估计
- GNSS信号容易受到干扰
- 高精度定位方法有限
5. 环境感知
- 环境元素的属性很难定义、
- 依靠手动标记的样品
6. 本地路径规划
- 对定位错误高度敏感
- 取决于几何约束信息
7. 端到端自动驾驶
- 数据稀缺
- 缺乏模拟环境
8. 运动控制
- 车辆与地面之间的复杂相互作用
- 车辆具有复杂的动态


### 环境感知

- 核心功能：识别可通过区域是确保自动驾驶安全
- 关键任务：对树木、车辆和道路等关键环境因素进行分割

1. 可遍历性估计

地形可穿越性分析更侧重于为无人驾驶车辆识别合适的路径
- 根据传感器，可遍历性估计算法分为基于激光雷达的、基于视觉的和基于融合的

  1) 基于激光雷达[基于几何信息的可遍历性估计方法侧重于从激光雷达点云中提取和分析几何特征，对环境的可通过性进行分类]
     1) 基于特征的方法[主要依靠从激光雷达点云中提取特征来评估地形的通过性]
        - Thrun等人引入的Min-Max高程映射技术。
          - 该方法首先将3D激光雷达点云投影到2D网格地图中。
          - 该方法通过检查每个网格单元内点的高度变化来评估每个网格单元的可遍历性。
        - 除了高度差异，其他参数，如平均高度、协方差、坡度和粗糙度也可以用来分析可遍历性,但是他们往往缺乏鲁棒性。（原因在注2）
        - 为了增强可遍历性分析中的鲁棒性，采用各种机器学习的算法
          - [127]利用期望最大化(EM)算法拟合基于标记统计特征的高斯混合模型(GMM)，将森林环境中的地形分为三个不同的组。[算法介绍在注3]
          - 如[128]中所述，支持向量机(SVM)分类器区分可穿越和不可穿越的区域，每个网格单元在NDT可穿越性图(NDT- tm)中表示[算法介绍在注3]
          - 在非结构化环境中，[129]中已经开发了随机森林分类器来识别可遍历的区域。
          - 此外，Lee和Chung[130]详细介绍了使用自训练算法对多层感知器(MLP)模型进行可遍历映射的训练。
          - Guan等人[131]将几何特征(如坡度和台阶高度)与语义属性相结合，以增强可遍历性分析。
        - 深度学习
          - 涉及重新编码点云，以创建适合cnn的密集输入张量
            - 将点云转换为高程图[132]、2D鸟瞰图(BEV)图[133]或距离图[134]
            - 使cnn能够以端到端的方式检测可穿越区域
          - 采用了像点网这样的架构[135]，专门为无序的3D点集设计
            - 端到端模型GndNet[136]将点网与支柱特征编码网络集成在一起，以实现有效的地面分割。
            - 一些方法旨在直接通过cnn预测可遍历性
              - Seo等人[137]引入了一个可扩展的框架，用于以自监督的方式从3D激光雷达点云中学习可遍历性。
            - 常需要大量带注释的数据集进行训练，对实际使用构成限制
      2) 基于模型的方法 [第一步涉及构建反映局部环境连续性特征的地形模型，然后基于该模型对可穿越性进行评估]
         -  广泛使用贝叶斯非参数推理（依赖于点云的空间相关性，从观测到的数据点估计连续的地形表面）
         -  高斯过程回归GPR,适用于可遍历性分析任务，但是在二维空间中计算量很大
            -  Chen等人提出了一种将2DGPR转换为一系列一维回归的方法，从而降低了计算复杂度[但是会损害第图模型的准确度]
            -  [138]中介绍的另一种方法是利用变分希尔伯特回归(VHR)进行可遍历性分析，方法是将点云投影到再现核希尔伯特空间(RKHS)中，对地形进行近似估计[方法解释在注4]
        - 贝叶斯广义核(BGK)推理已被应用于地形建模和可穿越性评估
          - 在[139]的工作中，通过两个顺序的BGK推理步骤实现了在线可遍历性分析方法
            - 精度和效率上有所提高，但它受到对单帧点云的依赖的限制，使其容易受到数据噪声的影响
            - 核函数往往过于光滑，这阻碍了其准确建模复杂环境中常见的地形不连续的能力
        - 地形建模还可以使用马尔可夫随机场(MRF)或条件随机场(CRF)进行[算法介绍在注5]
          - Zhang等人[140]在多标签MRF框架中将地形平滑作为假设与高度测量相结合，利用环路信念传播实现鲁棒地形建模和地面分割 
          - Rummelhard等人[141]将地形建模为时空CRF，使用EM算法估计地形高程。
          - Huang等人[142]利用图切方法解决了一个从粗到精的MRF模型，以实现有效的地面分割
          - Forkel等人[143]提出了一种概率地形估计方法，框架为递归高斯状态估计问题，他们在[150]中进一步将其扩展为动态分辨率模型
        - b样条曲面也被用于可遍历性分析，因为它们具有拟合复杂几何形状的出色能力,如[144]所示[算法注释5]

----


## **注**

### **1. 可遍历性估计**

**可遍历性估计 **是指：根据环境感知数据和机器人自身能力，判断某一区域是否能安全通过，并估计通过的难度或代价。
它的核心是：

- 环境建模（环境是什么样的）

- 约束条件（机器人能做什么）

- 可通行性判断（能不能通过，代价多大）

因此，可遍历性估计不仅仅是环境感知，还需要结合机器人 动力学特性 和 任务需求


###  **2. 原因**


        在基于激光雷达的特征方法中，除了高度差异外，其他参数如平均高度、协方差、坡度和粗糙度等可以用来估计可遍历性，但它们缺乏鲁棒性的原因主要有以下几点：

        **环境变化大**：激光雷达扫描的数据反映了环境的现状，但环境通常非常复杂，包含多种不规则和动态的元素。例如，坡度和粗糙度的变化可能会因地形的多样性或天气等因素而产生较大波动，这使得基于这些参数的评估方法在一些特殊环境下缺乏稳定性。

        **噪声和不精确性**：激光雷达数据本身存在噪声，特别是在复杂地形、低反射表面或覆盖物较多的区域。对于如协方差、坡度和粗糙度这类基于局部特征的参数，噪声的影响更加明显，容易导致误差，进而影响可遍历性估计的鲁棒性。

        **数据局限性**：激光雷达虽然可以提供高精度的距离信息，但它对地面物体的识别能力有限，尤其是对小物体或植被的处理能力较弱。比如，粗糙度的变化很大程度上受到地面物体（如石头、沙土等）的影响，而这些物体的尺寸和形状往往很难被激光雷达准确捕捉。

        **参数的计算方法问题**：例如，坡度和粗糙度等是通过计算激光雷达点云数据的局部特征得到的，这些计算方法通常依赖于点云的密度和分布。然而，如果点云稀疏或分布不均，计算出的坡度和粗糙度等参数可能会偏差较大，从而降低估计的鲁棒性。

        **不同地形类型的适应性差**：不同类型的地形（如沙漠、森林、岩石等）对这些参数的影响不同，而某些地形可能导致某些特征的变化幅度特别大。例如，在沙地上，粗糙度的变化可能比在岩石地形上要大得多，这使得使用相同标准的估计方法在不同地形上难以保持一致性。

        因此，这些特征方法的鲁棒性不足，通常需要结合更多的传感器信息（例如视觉传感器、IMU等）或更为复杂的模型，以提高在多变环境中的可靠性和稳定性。

### **3. EM GMM SVM**


**EM（Expectation-Maximization）算法**和**GMM（Gaussian Mixture Model）**是统计学和机器学习中常用的两个概念，它们密切相关，特别是在无监督学习中。

####  **EM（Expectation-Maximization）算法**

EM算法是一种迭代优化算法，用于在统计模型中最大化含有隐变量（latent variables）的数据的对数似然函数。其目标是估计模型参数，特别是在数据部分缺失或隐含的情况下。

##### EM的基本步骤：

* **E步（Expectation step，期望步骤）**：在当前参数估计下，计算隐变量的期望值，通常是通过对隐变量的后验分布进行估计。
* **M步（Maximization step，最大化步骤）**：在E步计算的基础上，最大化对数似然函数，从而更新模型参数。

EM算法的核心是交替进行这两个步骤，直到模型的参数收敛为止。

##### EM算法的应用场景：

* **数据缺失**：例如某些观测值丢失时，可以通过EM算法估计缺失值。
* **聚类**：在聚类问题中，EM算法可以通过高斯混合模型（GMM）来进行估计。
* **隐马尔可夫模型（HMM）**：HMM模型的参数也可以通过EM算法来估计。

---

#### 2. **GMM（Gaussian Mixture Model，高斯混合模型）**

GMM是一个概率模型，用于表示具有多个高斯分布（正态分布）的混合体。在GMM中，数据被假设为来自于多个不同的高斯分布，这些分布的每一个都有自己的均值、方差和混合权重。

##### GMM的数学模型：

GMM的基本假设是：数据集中的每个数据点都来自于一个混合的高斯分布。它的概率密度函数（PDF）可以表示为多个高斯分布的加权和：

$$
p(x) = \sum_{i=1}^{k} \pi_i \cdot \mathcal{N}(x | \mu_i, \Sigma_i)
$$

其中：

* $k$ 是高斯分布的数量（即组件数）。
* $\pi_i$ 是每个高斯分布的权重（满足 $\sum_{i=1}^{k} \pi_i = 1$）。
* $\mathcal{N}(x | \mu_i, \Sigma_i)$ 是第 $i$ 个高斯分布的概率密度函数，$\mu_i$ 和 $\Sigma_i$ 分别是第 $i$ 个高斯分布的均值和协方差矩阵。

##### GMM的参数：

GMM的参数包括：

* 每个高斯分布的均值（$\mu_i$）
* 每个高斯分布的协方差（$\Sigma_i$）
* 每个高斯分布的混合权重（$\pi_i$）

##### GMM与EM的关系：

GMM模型的参数估计通常是通过EM算法来完成的。EM算法会反复执行E步和M步，来估计每个高斯分布的参数，直到模型收敛为止。

##### GMM的应用：

* **聚类**：GMM通常用于聚类问题，它比K均值聚类方法更灵活，因为它不仅仅考虑数据的中心，还考虑数据的分布形态（如协方差）。
* **密度估计**：通过GMM可以对数据进行概率密度估计，生成新的数据点。
* **异常检测**：通过估计数据的分布，可以检测出偏离高斯分布的异常数据。

---

##### 总结：

* **EM算法**是一个通用的优化框架，用于处理包含隐变量的统计模型，广泛应用于很多领域。
* **GMM**是一个基于高斯分布的概率模型，它假设数据由多个高斯分布混合而成，常用于聚类和密度估计。

  它们之间的关系是，EM算法常用于GMM的参数估计过程中，帮助我们找到每个高斯分布的均值、协方差和混合权重。

#### 3. 支持向量机

支持向量机（Support Vector Machine，简称 SVM）是一种监督学习模型，广泛应用于分类、回归和异常检测等任务。SVM 的核心思想是找到一个超平面（hyperplane），它能够将不同类别的样本数据最大化地分开。这种“最大化间隔”的思想是 SVM 的一个关键特点。

##### 支持向量机的基本原理

假设我们有一个二分类问题，数据集中的样本点属于两个类别，SVM 的目标是找到一个超平面（在二维空间中就是一条直线），这个超平面能够将这两个类别的样本最大化地分开。换句话说，我们要找到一个能使得分类边界距离两类样本点尽可能远的超平面。

##### 1. **线性可分情况：**

如果数据是线性可分的，意味着我们可以用一条直线（或超平面）完全将数据划分成两类，那么 SVM 的目标就是找到一个最佳的超平面，使得该平面与两类数据点的间隔最大化。

假设我们有一个二维的情况：

$$
w \cdot x + b = 0
$$

其中：

* $w$ 是超平面的法向量，它决定了超平面的方向。
* $b$ 是偏置项，决定了超平面到原点的距离。

SVM 的目标是通过最大化样本到超平面的间隔（margin）来找到最优的超平面。

##### 2. **支持向量：**

支持向量是指离超平面最近的样本点。这些样本点是最重要的，因为它们决定了超平面的位置和方向。其他离超平面较远的点对超平面的位置影响较小。

##### 3. **间隔（Margin）：**

间隔是指超平面到最近的支持向量的距离。SVM 的目标是最大化这个间隔，因为最大化间隔可以增强分类器的泛化能力。间隔越大，模型对新数据的预测可能性越准确。

##### 数学形式化（线性可分的情形）：

给定一个训练集 $\{(x_1, y_1), (x_2, y_2), \dots, (x_n, y_n)\}$，其中 $x_i$ 是输入样本，$y_i \in \{-1, 1\}$ 是类别标签。SVM 的优化目标是：

$$
\min \frac{1}{2} ||w||^2
$$

使得对于所有的样本点 $i$，有：

$$
y_i (w \cdot x_i + b) \geq 1
$$

这个目标的含义是保证所有的样本都被正确分类，并且至少有一个间隔为 1 的空间。

##### 非线性可分情况：

当数据是非线性可分的时，SVM 通过引入 **核函数（Kernel Function）** 来映射数据到高维空间，从而使得数据变得线性可分。在高维空间中，SVM 就能找到一个超平面来进行分类。

常见的核函数有：

1. **线性核**： $K(x, x') = x \cdot x'$
2. **多项式核**： $K(x, x') = (x \cdot x' + c)^d$
3. **高斯径向基核（RBF）**： $K(x, x') = e^{-\gamma ||x - x'||^2}$

核函数的引入，使得 SVM 能够在原始空间中无法分类的情况，转换到高维空间后进行有效分类。

##### SVM 的优点：

1. **强大的分类能力**：SVM 在高维空间中表现出色，尤其适用于复杂的非线性分类问题。
2. **鲁棒性**：SVM 通过最大化间隔来确保较好的泛化能力，通常能较好地避免过拟合。
3. **有效处理小样本问题**：SVM 不需要大量的训练样本即可获得较好的分类效果。

##### SVM 的缺点：

1. **计算开销大**：对于大规模数据集，SVM 的训练时间较长，尤其是在计算核函数时。
2. **对核函数的选择敏感**：选择合适的核函数和调整参数（如 C 和 γ）对 SVM 的性能至关重要。

##### 应用场景：

SVM 广泛应用于各种分类任务，特别是文本分类、图像识别、基因数据分析等领域。

你有具体想了解的 SVM 应用，或者某一方面的深入讲解吗？

### **4. 希尔伯特空间等**


#### 希尔伯特空间（Hilbert Space）

**希尔伯特空间**是一个具有内积结构的完备的向量空间。具体来说，希尔伯特空间不仅是一个线性空间，而且还具备**内积**操作，使得空间中的向量可以进行加法和数乘，同时能够进行“距离”或“角度”的测量。

希尔伯特空间有两个关键特征：

1. **线性性**：空间中的元素可以通过加法和数乘来生成其他元素。
2. **内积空间**：有一个内积运算（也叫做“点积”），可以计算空间中任意两个向量之间的“角度”或“相似度”。内积满足正定性、对称性和线性等性质。

希尔伯特空间的一个重要特性是，它是**完备的**，即空间中的每个Cauchy(柯西)序列都有极限元素。这个性质使得希尔伯特空间成为一种非常强大且常用于函数空间分析的工具。

在机器学习和函数逼近中，希尔伯特空间可以被用来表示函数空间，允许我们对函数进行有效的运算和优化。

#### 变分希尔伯特回归（VHR） 方法

**变分希尔伯特回归（VHR）**是基于**希尔伯特空间**（Hilbert Space）理论的一种回归方法。它结合了变分法和希尔伯特空间的结构，主要用于解决具有非线性特征的回归问题。变分希尔伯特回归方法的核心思想是，在合适的希尔伯特空间中拟合函数，从而能够捕捉数据的非线性模式。与传统的回归方法相比，VHR能处理更复杂的情况，并且能通过优化得到更好的回归结果。

##### 变分法的作用

变分法（Variational Method）是一种通过改变某些参数来优化某种量的方法。在VHR中，变分法通常用于在某个空间中最小化**损失函数**或**误差函数**，从而找到最优的回归函数。这一过程通常表现为在希尔伯特空间中的**函数优化问题**，以达到最小化数据与拟合模型之间的误差。


#### 再现核希尔伯特空间（RKHS）

**再现核希尔伯特空间（Reproducing Kernel Hilbert Space, RKHS）**是希尔伯特空间的一种特殊类型。RKHS是与**核函数**（kernel function）密切相关的希尔伯特空间。核函数是用于度量空间中元素之间相似度的一种函数，它将原始输入空间映射到更高维的特征空间，使得在特征空间中进行线性操作就能够捕捉到输入空间中的非线性特性。

##### 核函数与RKHS的关系

在RKHS中，给定一个核函数 $k(x, y)$，它定义了空间中两个点（如样本点）之间的内积。具体地，RKHS中的每个点 $f$ 都是一个映射到原始输入空间的函数，而核函数则对应着一个内积运算，这个内积不仅度量点之间的相似度，还使得RKHS能够表示非线性函数关系。

* \*\*再现性（Reproducing）\*\*是RKHS的一个重要特点，它保证了在RKHS中的任何函数 $f$ 对应的内积 $\langle f, k(\cdot, x) \rangle$（这里 $k(\cdot, x)$ 是核函数）能够“重现”点 $x$ 上的函数值，即：

  $$
  f(x) = \langle f, k(\cdot, x) \rangle
  $$

  这个性质非常重要，因为它为我们提供了一种方法来通过计算内积来“提取”函数在某个点的值。

##### 核技巧（Kernel Trick）

RKHS的另一个关键特点是**核技巧**，它允许我们在高维空间中进行操作，而无需显式地计算高维映射。这使得RKHS成为处理非线性问题的强大工具。在高维空间中，非线性问题往往变得线性可解，因此通过核函数映射到RKHS后，我们就能将原本非线性的回归问题转化为线性问题，进行高效的处理。

#### 希尔伯特回归与RKHS中的回归

希尔伯特回归就是在希尔伯特空间中进行回归分析，其关键是利用空间中的内积结构来进行模型拟合。而在**RKHS**中，我们将回归问题转化为内积问题，通过核函数的作用，能够处理复杂的非线性关系。

具体的步骤通常是：

1. 通过选择合适的核函数，将原始数据映射到RKHS。
2. 在RKHS中建立回归模型，拟合数据。
3. 使用变分法或其他优化算法，找到最优的回归函数。

RKHS的优势在于，它能够利用核函数来处理高维空间中的非线性问题，进而通过回归方法得到精确的估计结果。

#### 总结

* \*\*变分希尔伯特回归（VHR）\*\*结合了变分法和希尔伯特空间的理论，用于解决非线性回归问题。
* **希尔伯特空间**是一个带内积结构的完备向量空间，用于处理函数之间的关系。
* \*\*再现核希尔伯特空间（RKHS）\*\*是一个特殊的希尔伯特空间，通过核函数映射将输入空间的数据映射到一个更高维的特征空间，从而捕捉到数据中的非线性特征。

变分希尔伯特回归方法通过将数据映射到RKHS，利用内积和核函数的特性，可以高效地解决复杂的非线性回归问题。这使得它在机器学习、数据拟合、地形建模等领域有广泛的应用。

### **5 马尔可夫随机场（MRF） 、 条件随机场（CRF）**

#### 1. 马尔可夫随机场（MRF）

马尔可夫随机场是一种无向图模型，其中每个节点表示一个随机变量，边表示节点之间的依赖关系。MRF的关键假设是马尔可夫性：即每个变量的条件独立性假设，即给定其邻居节点的信息，当前节点与其他节点是独立的。这意味着在地形建模中，某个区域的地形特征可以仅依赖于其邻近区域的特征，而不需要考虑整个地形的全局特征。

MRF在地形建模中的应用：

平滑与连续性：地形的变化通常是平滑的，且邻近的地形点之间变化不大。MRF通过对相邻地形点之间的依赖建模，能够很好地捕捉这种平滑性。

纹理建模：在高分辨率的地形模型中，可能还需要考虑地形的局部纹理（例如，山脉的岩石纹理或草原的草地纹理）。MRF可以通过节点之间的相互依赖性建模纹理的空间结构。

去噪：在点云数据中，噪声可能导致地形重建不精确。MRF能够通过建模地形的局部一致性来减少噪声的影响，从而获得更平滑和精确的地形模型。

####  2. 条件随机场（CRF）

条件随机场是MRF的一种扩展，它被用于给定某些观测数据的条件下建模随机变量的依赖关系。在CRF中，所有的随机变量都是条件独立的，给定了观测数据之后。在地形建模中，CRF可以用于建模地形数据（例如，高程数据）的空间依赖性，并在特定的条件下进行优化。

CRF在地形建模中的应用：

地形分类与分割：在地形建模中，CRF可以被用来进行地形的分类（如山地、平原、丘陵等）或分割（如提取某一特定区域的地形特征）。通过CRF，能够根据地形的局部特征和全局上下文来决定每个区域的类别。

边界检测：地形中的一些特征（如山脊线、河流等）通常是边界或过渡区域，CRF能够有效地识别和定位这些边界。

高分辨率地形重建：CRF可以结合多个输入信息（例如激光扫描数据、航拍影像等），在条件下建模地形的各个特征，从而实现高精度的地形重建。

#### 总结

MRF通常用于建模局部区域之间的依赖性，能够很好地捕捉地形数据的平滑性、连续性及纹理特征，适合于去噪和区域内特征的建模。

CRF则在MRF的基础上，条件化地建模地形数据的空间关系，能够在给定观测数据的条件下进行更精细的建模，适合于地形分类、分割、边界检测等任务。