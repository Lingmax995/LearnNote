
##   ROS2 命令行操作 

### 1. ROS2 文件系统的组成 [cite: 4]

ROS2 文件是由 Packages 和 Manifests (package.xml) 组成 

  *  **Packages (功能包)**：是 ROS2 软件中的基本单元，它是一组相关的文件和目录的集合，用于组织和管理 ROS2 的节点、库和资源等。功能包中包含了节点的源代码、配置文件、消息和服务定义等 [cite: 6]。
  *  **Manifests (package.xml)**：是功能包的描述文件，用于定义功能包的相关元信息和依赖关系。在 ROS 2 中，功能包通常包含一个名为 `package.xml` 的文件，其中包含有关功能包的元数据信息，如名称、版本、维护者、许可协议和依赖关系等 [cite: 7] 。Manifest 文件 (package.xml) 在 ROS 2 中具有重要的作用，它提供了对功能包的描述和管理，使得 ROS2 系统能够正确地处理功能包之间的依赖关系，并进行合适的构建和运行 [cite: 8]。

##  2. 了解 ROS2 的基本术语 

 下表是对 ROS2 的部分基本术语的解释说明 

| 术语名称 | 说明 |
| :--- | :--- |
| **底层通讯层(DDS)** |  提供了高性能、可靠、实时的数据通信和集成能力，为 ROS2 的节点之间的消息传递和服务调用提供了基础支持 
| **节点(Node)** |  在 ROS 中运行的最小处理单元，通常是一个可执行文件。每个节点可使用话题或服务与其它节点进行通信 
| **消息(Message)** |  是 int、float 和 boolean 等数据类型的变量  |
| **话题(Topic)** |  一种单向异步通信机制。通过发布消息到话题或订阅话题的形式，可以在节点之间实现数据的传输。话题的类型由对应消息的类型决定  |
| **发布(Publishing)** |  以与话题内容对应的消息类型发送数据  |
| **发布者(Publishers)** |  为执行发布，发布者节点在主节点上注册自己的话题等多种信息，并向希望订阅的订阅者节点发送消息  |
| **订阅(Subscribing)** |  以与话题内容对应的消息类型接收数据  |
| **订阅者(Subscribers)** |  为执行订阅，订阅者节点在主节点上注册自己的话题等多种信息，并从主节点接收所有发布了此节点需订阅话题的发布者节点的信息  |
| **服务(Services)** |  一种双向同步通信机制。服务客户端请求对应于特定目的任务的服务，服务服务端进行服务响应  |
| **服务服务器 (Service Servers)** |  以请求作为输入，响应作为输出的节点  |
| **服务客户端 (Service Clients)** |  以响应作为输入，请求作为输出的节点  |

##  3. 了解 ROS2 的常用文件 [cite: 21]

 下表是对 ROS2 中部分常用文件的介绍说明 ：

| 术语名称 | 说明 |
| :--- | :--- |
| **urdf 文件** |  描述机器人所有元素的模型文件，包含连杆(link)、关节(joint)、运动学参数(axis)、动力学参数(dynamics)、可视化模型(visual)和碰撞检测模型(collision)  |
| **srv 文件** |  存放在 srv 文件夹下，用于定义 ROS 服务消息，包含请求和响应两个部分，请求与响应之间使用符号“---”进行分隔  |
| **msg 文件** |  存放在 msg 文件夹下，用于定义 ROS 话题消息  |
| **package.xml** |  描述功能包的属性，包含功能包的名字、版本号、作者等  |
| **CmakeLists.txt** |  编译配置文件，使用 Cmake 编译  |
| **launch 文件** |  启动文件，包含系统性启动机器人所需的 node 和 services  |

##  4. 了解常用命令 

###  4.1 包管理工具 

 `ros2 pkg` 有 create、executables、list、prefix、xml 共 5 个命令 。

| 命令 | 详细说明 |
| :--- | :--- |
| `ros2 pkg create` |  创建功能包，指定包名、编译方式、依赖项、节点名等  |
| `ros2 pkg list` |  查看系统中功能包列表 |
| `ros2 pkg executables` |  查看包内可执行文件列表  |
| `ros2 pkg prefix` |  查看指定功能包的安装路径前缀  |
| `ros2 pkg xml` |  查看指定功能包的 package.xml 文件内容  |

###  4.2 节点运行工具 [cite: 41]

 `ros2 run` 的功能是运行包内节点，格式为：`ros2 run <package_name> <node_name>` 。
例如：

```bash
ubuntu@ubuntu:~$ ros2 run turtlesim turtle_node
```



###  4.3 节点查看工具 [cite: 44]

 `ros2 node` 命令用于查看节点消息 。

| 命令 | 详细说明 |
| :--- | :--- |
| `ros2 node list` |  查看当前域内(ROS\_DOMAIN\_ID相同的节点组)活动的节点列表  |
| `ros2 node info` |  查看节点详细信息，包括订阅、发布的消息，开启的服务和动作等  |

###  4.4 主题操作工具 

 `ros2 topic` 命令是用于对 ROS2 中的话题进行操作 。

| 命令 | 详细说明 |
| :--- | :--- |
| `ros2 topic list` |  列出域内可使用的主题列表  |
| `ros2 topic info` |  显示主题消息类型、订阅者数量、发布者数量等  |
| `ros2 topic type` |  查看主题消息类型  |
| `ros2 topic find` |  按消息类型查找相关主题  |
| `ros2 topic hz` |  显示主题平均发布频率  |
| `ros2 topic bw` |  显示所查阅主题的带宽  |
| `ros2 topic delay` |  通过 header 中的时间戳计算消息延迟  |
| `ros2 topic echo` |  在控制台显示主题消息  |
| `ros2 topic pub` |  通过命令行发布指定主题消息  |

###  4.5 接口操作工具 [cite: 54]

 `ros2 interface` 指令是用于对 ROS2 中的接口进行操作 。

| 命令 | 详细说明 |
| :--- | :--- |
| `ros2 interface list` |  显示系统内所有的接口，包括消息(Messages)、服务(Services)、动作(Actions)  |
| `ros2 interface package` |  显示指定接口包内的子接口  |
| `ros2 interface packages` |  显示指定接口包  |
| `ros2 interface show` |  显示指定接口的详细内容  |
| `ros2 interface proto` |  显示消息模板  |